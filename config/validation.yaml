# API validation configuration for F5 XC API specifications

# API endpoint configuration
api:
  # Base URL for live API validation
  base_url: "https://console.ves.volterra.io"

  # Request timeout in seconds
  timeout: 30

  # Maximum retries for failed requests
  max_retries: 3

  # Delay between retries (seconds)
  retry_delay: 2

# Authentication (for GitHub Actions, use secrets)
authentication:
  # Authentication method: api_token, p12_bundle, or none
  method: "api_token"

  # Environment variable names for credentials
  env_vars:
    api_token: "F5XC_API_TOKEN"
    api_url: "F5XC_API_URL"

# Validation scope
scope:
  # HTTP methods to validate (OPTIONS/HEAD for availability)
  validate_methods:
    - GET
    - OPTIONS

  # Methods to skip (write operations)
  skip_methods:
    - POST
    - PUT
    - DELETE
    - PATCH

  # Maximum endpoints to validate per spec
  max_endpoints_per_spec: 50

  # Sample size for GET request validation
  sample_size: 5

# Endpoint filters
filters:
  # Skip endpoints matching these patterns
  skip_patterns:
    - "/api/internal/*"
    - "/api/debug/*"
    - "/api/test/*"

  # Only validate endpoints matching these patterns (empty = all)
  include_patterns: []

  # Skip endpoints requiring specific namespaces
  skip_namespace_required: false

# Response validation
response:
  # Validate response status codes
  validate_status: true

  # Expected success status codes
  success_codes:
    - 200
    - 201
    - 204

  # Validate response schema against spec
  validate_schema: true

  # Allow additional properties not in schema
  allow_additional_properties: true

  # Validate content type
  validate_content_type: true

# Reporting
reporting:
  # Output file for validation report
  output_file: "reports/validation-report.json"

  # Generate markdown summary
  markdown_summary: true

  # Include request/response details in report
  include_details: true

  # Report format: json, markdown, or both
  format: "both"

# Thresholds for validation status
thresholds:
  # Minimum percentage of endpoints that must be available
  min_availability: 80

  # Minimum percentage of schema matches
  min_schema_match: 70

  # Maximum allowed discrepancies before failing
  max_discrepancies: 50

# Concurrency settings
concurrency:
  # Number of parallel validation requests
  workers: 10

  # Rate limiting (requests per second)
  rate_limit: 10

  # Connection pool size
  pool_size: 20

# Caching
cache:
  # Enable response caching for repeated requests
  enabled: true

  # Cache TTL in seconds
  ttl: 300

  # Cache directory
  directory: ".validation_cache"
